---
import '../../styles/global.css';
import groq from 'groq'
import { sanity } from '../../lib/sanity'

const posts = await sanity.fetch(groq`
  *[_type == "post"] | order(publishedAt desc){
    title, "slug": slug.current, coverImage, publishedAt
  }[0...50]
`)
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>News</title>
  </head>
  <body style="font-family:system-ui;max-width:900px;margin:0 auto;padding:20px;">
    <h1>Latest News</h1>
    <ul>
      {posts.map((p: any) => (
        <li style="margin:8px 0;">
          <a href={`/news/${p.slug}/`}>{p.title}</a>
          {' '}â€” {new Date(p.publishedAt).toLocaleDateString()}
        </li>
      ))}
    </ul>
  </body>
</html>
