---
import Base from '../../layouts/Base.astro';
import groq from 'groq';
import { sanity } from '../../lib/sanity';

const posts = await sanity.fetch(groq`
  *[_type == "post"] | order(publishedAt desc){
    title, "slug": slug.current, publishedAt
  }[0...50]
`);
---

<Base title="Latest News" description="Articles & guides from Trusted Crypto">
  <h1 class="text-2xl font-semibold mb-4">Latest News</h1>
  <ul class="space-y-2">
    {posts.map((p: any) => (
      <li>
        <a class="underline" href={`/guides/${p.slug}/`}>{p.title}</a>
        <span class="opacity-70"> â€” {new Date(p.publishedAt).toLocaleDateString()}</span>
      </li>
    ))}
  </ul>
</Base>
